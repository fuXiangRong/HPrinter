!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(3)},,,function(e,t,i){!function(e){if(!e.wap2app){var t="1.1.6";i(4);var n=i(8),o=i(9),a=i(10),r=i(11),s=i(14),p=i(15),c=i(16),l=i(17),h=i(13),d=i(18),u=i(19),w=i(20),v=i(21),f=i(22),_=i(12),b=i(23),m=i(25),g=i(28),y=i(30),O=!1,W=!1,I=!1,k=!1,A=!1,T=function(t){e.__wap2app_init||(e.__wap2app_init=!0,n.plusReady(function(){if(W=new g(t),O=plus.webview.currentWebview().id,A=plus.webview.getWebviewById(h.W2A_CONTEXT_ID),O===plus.runtime.appid){plus.storage.removeItem(h.W2A_CONTEXT_READY);var i=new y(W);"file:"===e.location.protocol?i.handleOldVersion():(A?plus.storage.setItem(h.W2A_CONTEXT_READY,"TRUE"):V(),B(O))}else O===h.W2A_CONTEXT_ID?(k=new m(W),plus.storage.setItem(h.W2A_CONTEXT_READY,"TRUE")):B(O)}))},x=function(e,t,i){k?k.open("blank",plus.webview.getWebviewById(i),e,t):A&&A.evalJS("wap2app&&wap2app.open('"+e+"','"+(t||"")+"','"+O+"')")},S=function(e){k?k.back(e):A&&A.evalJS("wap2app&&wap2app.back("+e+")")},E=function(){k?k.close():A&&A.evalJS("wap2app&&wap2app.close()")},R=function(e){I&&I.fixed(e)},C=function(){},V=function(){i(31),A=plus.webview.create("_www/__wap2appcontext.html",h.W2A_CONTEXT_ID,{opacity:0,zindex:-1,popGesture:"none"}),A.show("none"),plus.webview.getLaunchWebview().show("none")},B=function(e){I||(I=new b(W.getWebviewOptionsById(e)))};e.wap2app={version:t,os:o,SPA:a,dom:r,util:n,now:n.now,init:T,gps:i(24),config:function(e){try{e()}catch(t){console.error(t)}},open:x,quit:C,back:S,close:E,fixed:R,ajax:p,report:c,setting:l,trigger:r.trigger,plusReady:n.plusReady,domReady:r.ready,extend:n.extend,iframe:w,confirm:v,previewImage:f,getStyles:r.getStyles,getCookie:d.get,setCookie:d.set,removeCookie:d.remove,injectStyle:r.injectStyle,getLocation:r.getLocation,ge:function(e){return-1!==n.versionCompare(t,e)},lt:function(e){return-1===n.versionCompare(t,t)},share:{init:s.init,open:function(t,i,n){t=t||{title:document.title,content:document.title,href:e.location.href},"string"==typeof t&&(t=JSON.parse(t)),s.open(t,i,n)}},getContext:function(){return k},isConfiged:function(e){return W.isConfiged(e)},getW2AOptions:function(){return W},currentW2AWebview:function(){return I},getArgs:u,createW2AView:function(e,t,i){var n=i&&plus.webview.getWebviewById(i);return n||(n=plus.webview.currentWebview()),new _(e,n,t)}}}}(window)},function(e,t,i){i(5),i(6),i(7)},function(e,t){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.splice.call(arguments,1),i=this,n=function(){var o=t.concat(Array.prototype.splice.call(arguments,0));return this instanceof n?void i.apply(this,o):i.apply(e,o)};return n.prototype=i.prototype,n}},function(e,t){function i(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("Events"),n=!0;for(var o in t)"bubbles"===o?n=!!t[o]:i[o]=t[o];return i.initEvent(e,n,!0),i}"undefined"==typeof window.CustomEvent&&(i.prototype=window.Event.prototype,window.CustomEvent=i)},function(e,t,i){var n=i(8).plusReady,o=i(9);if(o.plus){navigator.geolocation.clearWatch=function(e){n(function(){plus.geolocation.clearWatch(e)})},navigator.geolocation.getCurrentPosition=function(e,t,i){n(function(){+new Date;plus.geolocation.getCurrentPosition(function(t){e(o.stream&&o.qihoo?t:p(t))},t,i)})},navigator.geolocation.watchPosition=function(e,t,i){n(function(){plus.geolocation.watchPosition(e,t,i)})};var a=3.141592653589793,r=6378245,s=.006693421622965943,p=function(e){if("gcj02"===e.coordsType){var t=c(e.coords.longitude,e.coords.latitude);e.coords.longitude=t[0],e.coords.latitude=t[1]}return e},c=function(e,t){if(d(e,t))return[e,t];var i=l(e-105,t-35),n=h(e-105,t-35),o=t/180*a,p=Math.sin(o);p=1-s*p*p;var c=Math.sqrt(p);return i=180*i/(r*(1-s)/(p*c)*a),n=180*n/(r/c*Math.cos(o)*a),mglat=t+i,mglng=e+n,[2*e-mglng,2*t-mglat]},l=function(e,t){var i=-100+2*e+3*t+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,i+=2*(20*Math.sin(t*a)+40*Math.sin(t/3*a))/3,i+=2*(160*Math.sin(t/12*a)+320*Math.sin(t*a/30))/3},h=function(e,t){var i=300+e+2*t+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*a)+20*Math.sin(2*e*a))/3,i+=2*(20*Math.sin(e*a)+40*Math.sin(e/3*a))/3,i+=2*(150*Math.sin(e/12*a)+300*Math.sin(e/30*a))/3},d=function(e,t){return 72.004>e||e>137.8347||.8293>t||t>55.8271||!1}}},function(e,t){var i=Array.isArray||function(e){return e instanceof Array},n=function(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype},o=function(e,t){if(t)for(var i in t){var a=e[i],r=t[i];n(r)?e[i]=o(a&&n(a)?a:{},r):"undefined"!==r&&(e[i]=r)}return e},a=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];i&&n(i)&&o(e,i)}return e},r=function(e,t,n){return"string"==typeof t?t===e:"function"==typeof t?(n.splice(0,0,e),t.apply(null,n)):i(t)?~t.indexOf(e):t instanceof RegExp?t.test(e):!1},s=function(e,t,i){var n=!0;return i=i||[],i.splice(0,0,e),t.matchHostnames&&(n=r(e.hostname,t.matchHostnames,i),"function"==typeof t.matchHostnames&&i.splice(0,1),null!==n&&!n)?!1:t.matchPathnames&&(n=r(e.pathname,t.matchPathnames,i),"function"==typeof t.matchHostnames&&i.splice(0,1),null!==n&&!n)?!1:t.title&&e.title&&(n=r(e.title,t.title,i),null!==n&&!n)?!1:n},p=function(e){window.plus?e():document.addEventListener("plusready",function(){e()},!1)},c=/\+/g,l=/([^&=]+)=?([^&]*)/g,h=function(e){var t={};if(e=e&&(0===e.indexOf("?")?e.replace("?",""):e))for(var i;i=l.exec(e);)t[d(i[1])]=d(i[2]);return t},d=function(e){return decodeURIComponent(e.replace(c," "))},u=function(e,t){var i=h(t||location.search);return i.hasOwnProperty(e)?i[e]:""},w=Date.now||function(){return(new Date).getTime()},v=function(e,t,i){var n,o,a,r,s=0;i||(i={});var p=function(){s=i.leading===!1?0:w(),n=null,r=e.apply(o,a),n||(o=a=null)},c=function(){var c=w();s||i.leading!==!1||(s=c);var l=t-(c-s);return o=this,a=arguments,0>=l||l>t?(n&&(clearTimeout(n),n=null),s=c,r=e.apply(o,a),n||(o=a=null)):n||i.trailing===!1||(n=setTimeout(p,l)),r};return c.cancel=function(){clearTimeout(n),s=0,n=o=a=null},c},f=function(e,t,i){return e>i.left&&e<i.left+i.width&&t>i.top&&t<i.top+i.height},_=function(){return!!plus.nativeObj.hasOwnProperty("View")},b=function(e,t){if(typeof e+typeof t!="stringstring")return!1;for(var i=e.split("."),n=t.split("."),o=0,a=Math.max(i.length,n.length);a>o;o++){if(i[o]&&!n[o]&&parseInt(i[o])>0||parseInt(i[o])>parseInt(n[o]))return 1;if(n[o]&&!i[o]&&parseInt(n[o])>0||parseInt(i[o])<parseInt(n[o]))return-1}return 0},m=function(){if("Android"!==plus.os.name)return plus.ios["import"]("WXApi").isWXAppInstalled();try{var e=plus.android.runtimeMainActivity().getPackageManager(),t=plus.android.importClass(e);return!!e.getPackageInfo("com.tencent.mm",t.GET_ACTIVITIES)}catch(i){}},g=0,y=0;e.exports={now:w,time:function(e){var t=w();e&&(g=t,y=t),g||(g=t,y=t);var i=t-y;return y=w(),"[\u8017\u65f6\uff1a"+(t-g)+"\uff0c"+i+"]"},isObject:n,isArray:i,isMatch:s,extend:a,isCross:f,throttle:v,plusReady:p,parseParams:h,getUrlParam:u,versionCompare:b,supportNativeObj:_,isWechatInstalled:m}},function(e,t){var i={android:!1,ios:!1,plus:!1,stream:!1,qihoo:!1,qihoobrowser:!1,wkwebview:!1},n=navigator.userAgent;n.match(/(Android);?[\s\/]+([\d.]+)?/)?i.android=!0:n.match(/(iPhone\sOS)\s([\d_]+)/)&&(i.ios=!0,window.webkit&&window.webkit.messageHandlers&&(i.wkwebview=!0)),n.match(/Html5Plus/i)&&(i.plus=!0,n.match(/StreamApp/i)&&(i.stream=!0,n.match(/qihoobrowser/i)?i.qihoobrowser=!0:n.match(/Qihoo/i)&&(i.qihoo=!0))),e.exports=i},function(e,t,i){var n=i(8),o=i(11),a=i(12),r=!1,s=[],p=function(e,t,i,n,o){busying=!0,"string"==typeof t&&(n=i,i=t,t=!1),i=i||plus.webview.currentWebview().id;var p=plus.webview.getWebviewById(i);wap2app.getContext()&&(s=wap2app.getContext().getWebviewContextById(i).history);var l=function(i,o){r=i,n===!0?p.evalJS('location.replace("'+e+'")'):n===!1&&p.evalJS('location.href="'+e+'"'),t&&t(i,o)},h=wap2app.getW2AOptions().getWebviewOptionsByUrl(e);if(!h.screenshot||!h.screenshot.url)return void l(!1);var d=function(){var t=new a(c(e,h.screenshot),p,h.screenshot);t.show(h.show.aniShow,h.show.duration,function(e){e?l(t,h):l(!1),o||setTimeout(function(){t.close(h.screenshot.animation.type,h.screenshot.animation.duration,function(){setTimeout(function(){t.clear()},h.screenshot.animation.delay)})},h.delay)})},u=new plus.nativeObj.Bitmap(e+"_"+Math.random());p.draw(u,function(){!n&&s.push(u.id),d()},function(){u.clear(),u=null,!n&&s.push(!1),d()})},c=function(e,t){if("function"==typeof t.handle){var i=o.getLocation(e);return t.handle(i.pathname,i)}return t.url},l=function(e,t,i,o){if(!r||!r.isVisible()){var p=!1,c=!1;"string"==typeof i?(p=i,c=plus.webview.getWebviewById(p),i=function(e){c&&c.back()},wap2app.getContext()&&(s=wap2app.getContext().getWebviewContextById(p).history)):(c=plus.webview.currentWebview(),p=c.id),"string"==typeof o&&(o=JSON.parse(o)),e=e||"pop-out",t=t||200,o=n.extend({showWaiting:!1,delay:200,animation:{type:"shrink",duration:200,delay:0,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},o);var l=s.pop();if(l){var h=new a(l,c,{animation:o.animation});h.show(e,t,function(e){e?i&&i(!0,function(){o.showWaiting&&plus.nativeUI.showWaiting(),setTimeout(function(){h.close("shrink",200,function(){h.clear();var e=plus.nativeObj.Bitmap.getBitmapById(l);e&&e.clear(),o.showWaiting&&plus.nativeUI.closeWaiting()})},o.delay)}):i&&i(!1)})}else i&&i(!1)}};e.exports={open:p,back:l}},function(e,t,i){var n=i(8),o=/complete|loaded|interactive/,a=function(e){o.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){e()},!1)},r=function(e,t,i){e&&e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}))},s=function(e){a(function(){var t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)})},p=function(e,t){var i=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?i.getPropertyValue(t)||i[t]:i},c=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},l=["hash","host","hostname","href","origin","pathname","port","protocol","search"],h=document.createElement("a"),d=function(e,t){h.href=e;for(var i={title:t},n=0,o=l.length;o>n;n++){var a=l[n];i[a]=h[a]}return i},u=function(e,t,i){var o={};n.isObject(i)?(o=i,o.expires=o.expires||1):o.expires=i||1;var a=new Date;a.setTime(a.getTime()+24*o.expires*60*60*1e3);var r="expires="+a.toUTCString(),s=o.path||"/",p=o.domain||"";document.cookie=e+"="+t+"; path="+s+"; "+(p?"domain="+p+"; ":"")+r+"; "},w=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},v=function(e,t){n.isObject(t)||(t={}),t.expires=-1,u(e,"",t)};e.exports={ready:a,trigger:r,setCookie:u,getCookie:w,removeCookie:v,getStyles:p,getLocation:d,injectStyle:s,elementMatch:c}},function(e,t,i){var n=i(8),o=i(13),a=function(e,t,i,o){this.id=e,n.isObject(t)?(this.styles=t,this.webview=i,this.options=o):(this.options=i,this.webview=t,this.styles=!1),this.view=!1,this.bitmap=!1,this.visible=!1,this.animated=!1,this.title=!1,this.aniShow="pop-in",this.stopped=!1,this.drewTexts=!1,this.firstView=!1,this.secondView=!1,this.w2aContext=wap2app.getContext(),this._init()},r=a.prototype;r._init=function(){if(this.styles)this.view=new plus.nativeObj.View(this.id,this.styles);else{if(this.bitmap=this._getBitmapById(this.id),!this.bitmap)return;this.view=this._getViewById(o.W2A_VIEW_ID)}},r._getViewById=function(e){return this.w2aContext?this.w2aContext.getViewById(e):plus.nativeObj.View.getViewById(e)},r._getBitmapById=function(e){return this.w2aContext?this.w2aContext.getBitmapById(e):plus.nativeObj.Bitmap.getBitmapById(e)},r.setTitle=function(e){e&&!this.title&&(this.title=e,this.drawTexts(this.view,[n.extend(this.options.title,{text:e})]))},r.show=function(e,t,i,n){if(this.aniShow=e,!this.view)return this.visible=!1,i&&i(!1),!1;if(!e||"none"===e){if(this.webview){var a=this.webview;a=a.parent()||a,a.draw(this.bitmap,function(){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this.drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0)}.bind(this),function(e){this.visible=!1,i&&i(!1)})}else this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this._drawRect(),this.drawTexts(this.view,this.options.drawText),this.view.show(),i&&i(!0);return!0}if("slide-in-right"===e)return this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),this.drawTexts(this.view,this.options.drawText),this.firstView=this.view,this.secondView=null,plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){n&&n(!0)}),i&&i(!0),!0;this.relatedView=this._getViewById(o.W2A_OTHER_VIEW_ID);var r=this._getBitmapById(o.W2A_OTHER_BITMAP_ID);if(this.relatedView&&r){var a=this.webview,s=function(o){this.visible=!0,this.animated=!1,this.view.drawBitmap(this.bitmap),o&&(this.relatedView={bitmap:o}),this.drawTexts(this.view,this.options.drawText),this.firstView=this.relatedView,this.secondView=this.view,"pop-out"===e&&(this.firstView=this.view,this.secondView=this.relatedView),plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){n&&n(!0)}),i&&i(!0)};if(!a)return void("pop-in"===e||"pop-out"===e?s.call(this,!1):(this.visible=!1,i&&i(!1)));a=a.parent()||a,a.draw(r,function(){s.call(this,r)}.bind(this),function(t){"pop-in"===e||"pop-out"===e?s.call(this,!1):(this.visible=!1,i&&i(!1))}.bind(this))}else this.visible=!1,i&&i(!1)},r.back=function(e,t,i){var n=this,o=function(){plus.nativeObj.View.clearAnimation(),n.hide(),n.reset(),n.visible=!1};"function"==typeof this.view.setTouchEventRect&&this.firstView?plus.nativeObj.View.startAnimation({type:e,duration:t},this.firstView,this.secondView,function(){o()}):o()},r.close=function(e,t,i){if(this.visible){var n=this.options.animation;"pop-out"===this.aniShow?(this.animated=!0,i&&i(!0)):this.view.animate({type:e,duration:t,frames:n.frames,region:n.region},function(){this.animated=!0,i&&i(!0)}.bind(this))}else i&&i(!1)},r.setStopped=function(e){this.stopped=e},r.clear=function(e){this.visible&&(this.stopped,this.animated?(plus.nativeObj.View.clearAnimation(),this.hide(),this.reset(),this.visible=!1,e&&e()):this.clearTimer=setTimeout(function(){this.clear(e)}.bind(this),200))},r.isVisible=function(){return this.visible},r.hide=function(){var e=this._getViewById(o.W2A_VIEW_ID);e&&e.hide(),e=this._getViewById(o.W2A_OTHER_VIEW_ID),e&&e.hide()},r.reset=function(){var e=this._getViewById(o.W2A_VIEW_ID);e&&e.reset(),e=this._getViewById(o.W2A_OTHER_VIEW_ID),e&&e.reset()},r._drawRect=function(){if(this.options.matchPathnames){var e=this.options.placeholder,t=this.options.animation.region,i=this._getDst(t.top),n=this._getDst(t.bottom);this.view.drawRect(e,{top:i,height:window.innerHeight-i-n})}},r._getDst=function(e){if("number"==typeof e)return parseInt(e,10);if("string"==typeof e){if(-1!==e.indexOf("px",e.length-2))return parseInt(e,10);var t=document.querySelector(e);return t&&t.offsetHeight||0}if("function"==typeof e){var e=parseInt(e(),10);return e||0}return 0},r._ellipsis=function(e,t){if(!e)return"";if(!t||e.replace(/[^\x00-\xff]/g,"**").length<=t)return e;for(var i=0,n="",o=0;o<e.length;o++)if(n+=e.charAt(o),e.charCodeAt(o)>128){if(i+=2,i>t)return n.substring(0,n.length-1)+"..."}else if(i+=1,i>t)return n.substring(0,n.length-2)+"...";return e},r.drawTexts=function(e,t){if("function"==typeof t&&(t=t(),t&&n.isObject(t)&&(t=[t])),t&&n.isArray(t)&&t.length){for(var i=0;i<t.length;i++){var o=t[i];if(o.text){var a=o.text;"function"==typeof a&&(a=a()),a&&(e.drawText(this._ellipsis(a,o.max||25),o.dst,o.styles),this.drewTexts=!0)}}return t}return!1},e.exports=a},function(e,t){e.exports={SCREENSHOT_PATH:"_www/__wap2app/screenshot/",W2A_WEBVIEW_ID:"__W2A_WEBVIEW_ID_",W2A_LAUNCH_WEBVIEW_ID:"launch",W2A_TEMPORARY_WEBVIEW_ID:"__W2A_TEMPORARY",W2A_APP_NAME:"__W2A_APP_NAME",W2A_CONTEXT_READY:"__W2A_READY",W2A_WEBVIEW_LOADING:"__W2A_WEBVIEW_LOADING_",W2A_WEBVIEW_BACKING:"__W2A_WEBVIEW_BACKING_",W2A_WEBVIEW_RELOAD:"__W2A_WEBVIEW_RELOAD_",W2A_BITMAP_ID:"__W2A_BITMAP",W2A_OTHER_BITMAP_ID:"__W2A_OTHER_BITMAP",W2A_VIEW_ID:"__W2A_VIEW",W2A_OTHER_VIEW_ID:"__W2A_OTHER_VIEW",W2A_GROUP_SPLIT:"__W2A_GROUP__",W2A_CONTEXT_ID:"__W2A_CONTEXT_",W2A_BROWSER_ID:"__W2A_BROWSER_",W2A_OVERRIDE_IGNORE:["tel:","mailto:","callto:","weixin:","alipay:","alipayqr:","weibo:","mqq:"],W2A_OVERRIDE_MATCH:"^(http|https|ftp|tel|mailto|callto|weixin|alipay|alipayqr|weibo|mqq).*",W2A_BROWSER_CHILD_ID:"__W2A_WEBVIEW_ID_BROWSER_CHILD_",W2A_GPS_TIME:"__W2A_GPS_TIME",W2A_ACTIVE_CLASS:"__W2A_ACTIVE",W2A_IFRAME_CLASS:"__W2A_IFRAME",W2A_IFRAME_STYLES:"-webkit-transform:translate(0px, -100%);position: fixed;background: transparent;left: 0;top: 0;right: 0;bottom: 0;width:100%;height:100%;z-index: 2147483647;border:0;"}},function(e,t,i){function n(e,t,i){var n=h[e];return n?void(n.authenticated?o(n,t,i):n.authorize(function(){o(n,t,i)},function(e){plus.nativeUI.alert("\u8ba4\u8bc1\u6388\u6743\u5931\u8d25"),i&&i(!1)})):(plus.nativeUI.alert("\u65e0\u6548\u7684\u5206\u4eab\u670d\u52a1["+e+"]"),void(i&&i(!1)))}function o(e,t,i){e.send(t,function(){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u6210\u529f\uff01'),i&&i(!0)},function(t){plus.nativeUI.toast('\u5206\u4eab\u5230"'+e.description+'"\u5931\u8d25\uff01'),i&&i(!1)})}function a(e,t,i){c.android&&u||t&&t(!1);var n=plus.android.importClass("android.content.Intent");if(s&&n){var o=new n(n.ACTION_SEND);o.setType("text/plain"),o.putExtra(n.EXTRA_TEXT,e.content),o.setFlags(n.FLAG_ACTIVITY_NEW_TASK),s.startActivity(n.createChooser(o,i||"\u7cfb\u7edf\u5206\u4eab")),t&&t(!0)}else t&&t(!1)}function r(e,t,i){if(!u)return void(t&&t(!1));if(e.href&&l.post("http://m3w.cn/sd/reg",{appid:plus.runtime.appid,deviceid:plus.device.imei,wap:e.href,stream:"url="+encodeURIComponent(e.href)},function(t){t&&0===t.ret&&(e.href=t.surl)}),!c.qihoobrowser&&!d&&h.weixin&&p.isWechatInstalled())plus.nativeUI.actionSheet({title:i||"\u5206\u4eab\u5230",cancel:"\u53d6\u6d88",buttons:[{title:"\u5fae\u4fe1\u6d88\u606f"},{title:"\u5fae\u4fe1\u670b\u53cb\u5708"},{title:"\u66f4\u591a\u5206\u4eab"}]},function(o){var r=o.index;switch(r){case 1:e.extra={scene:"WXSceneSession"},n("weixin",e,t);break;case 2:e.title=e.content,e.extra={scene:"WXSceneTimeline"},n("weixin",e,t);break;case 3:var s=e.href?"\uff08"+e.href+"\uff09":"";e.title=e.title+s,e.content=e.content+s,a(e,t,i)}});else{var o=e.href?"\uff08"+e.href+"\uff09":"";e.title=e.title+o,e.content=e.content+o,a(e,t)}}var s,p=i(8),c=i(9),l=i(15),h={},d=!1,u=!1,w=function(){var e=plus.runtime.innerVersion.split(".");d=e[e.length-1]<20133,c.android&&(s=plus.android.runtimeMainActivity()),d||plus.share.getServices(function(e){for(var t=0,i=e.length;i>t;t++){var n=e[t];h[n.id]=n}}),u=!0};e.exports={init:w,open:r,openSystem:a}},function(e,t,i){var n=function(e){var t=[];if(e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.length?t.join("&"):""},o=function(e,t){return"string"!=typeof t&&(t=n(t)),(e+"&"+t).replace(/[&?]{1,2}/,"?")},a=function(e,t,i,a){"function"==typeof i&&(a=i,i=!1);var r=new plus.net.XMLHttpRequest;a&&(r.onreadystatechange=function(){4==r.readyState&&(200==r.status?a&&a(JSON.parse(r.responseText)):a&&a(!1))});var s=n(i);s&&"GET"===e&&(t=o(t,s)),r.open(e,t),"POST"===e&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send("POST"===e?s:!1)};e.exports={post:function(e,t,i){a("POST",e,t,i)},get:function(e,t,i){a("GET",e,t,i)},serializeData:n,appendQuery:o}},function(e,t,i){var n=i(15),o=function(e,t,i,o,a){if(a=a||1,!(Math.random()>a)){var r={appid:plus.runtime.appid,app_version:plus.runtime.version,type:e||5,url:t||"",webview_id:i||"",message:o||"",p:"iOS"===plus.os.name?"i":"a",os:plus.os.version,imei:plus.device.imei,md:plus.device.model,net:plus.networkinfo.getCurrentType(),plus_version:plus.runtime.innerVersion};n.post("https://stream.dcloud.net.cn/wap2app/monitor",r)}};e.exports={css:function(e,t,i,n){o(1,e,t,i,n)},dom:function(e,t,i,n){o(2,e,t,i,n)},pathname:function(e,t,i,n){o(3,e,t,i,n)},sms:function(e,t,i,n){o(4,e,t,i,n)},other:function(e,t,i,n){o(5,e,t,i,n)}}},function(e,t,i){var n,o,a,r,s=i(9),p=function(){s.android&&(n=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Intent"),a=plus.android.importClass("android.provider.Settings"),r=plus.android.importClass("android.net.Uri"))};e.exports={openLocationSource:function(){n||p(),n&&n.startActivity(new o(a.ACTION_LOCATION_SOURCE_SETTINGS))},openApplicationDetail:function(){n||p(),n&&n.startActivity(new o(a.ACTION_APPLICATION_DETAILS_SETTINGS,r.parse("package:"+n.getPackageName())))},openAirPlaneModeSetting:function(){n||p(),n&&n.startActivity(new o(a.ACTION_AIRPLANE_MODE_SETTINGS))}}},function(e,t){var i=function(e,t,i,n){n=n||1;var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toUTCString();plus.navigator.setCookie(e,t+"="+i+"; "+a)},n=function(e,t){var i=t+"=",n=plus.navigator.getCookie(e);if(n){n=n.split(";");for(var o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(i))return a.substring(i.length,a.length)}}return""},o=function(e,t){i(e,t,"",-1)};e.exports={set:i,get:n,remove:o}},function(e,t){var i=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){var t={};if(e=e&&(0===e.indexOf("?")?e.replace("?",""):e))for(var i;i=n.exec(e);)t[a(i[1])]=a(i[2]);return t},a=function(e){return decodeURIComponent(e.replace(i," "))},r=function(e){var t=e||plus.runtime.arguments;if(t&&"string"==typeof t){if(~t.indexOf("//"))t=t.split("//"),t=t.length>1?t[1]:"";else if(t){try{var i=JSON.parse(t);i&&(t=i)}catch(n){}"string"==typeof t&&(t=o(t),t.arg&&(t=decodeURIComponent(t.arg)))}return"string"==typeof t&&(t=o(t)),t}return{}};e.exports=r},function(e,t,i){var n=i(13),o="."+n.W2A_IFRAME_CLASS+"."+n.W2A_ACTIVE_CLASS,a=function(e){var t=e.id,i=e.styles||n.W2A_IFRAME_STYLES,o=e.html,a=document.getElementById(t);if(!a){a=document.createElement("iframe"),a.id=t,a.allowtransparency="true",a.setAttribute("style",i),document.body.appendChild(a);var r=a.contentWindow.document;r.designMode="on",r.open(),r.write(o),r.close(),r.designMode="off"}return a},r=function(e){return e?document.querySelector("#"+e+o):document.querySelector(o)},s=function(e){var t=document.getElementById(e);return t&&!~t.className.indexOf(n.W2A_ACTIVE_CLASS)?(t.className=n.W2A_IFRAME_CLASS+" "+n.W2A_ACTIVE_CLASS,t.style.webkitTransform="translate(0,0)",!0):!1},p=function(e){var t=r(e);return t?(t.className=n.W2A_IFRAME_CLASS,t.style.webkitTransform="translate(0,-100%)",!0):!1};e.exports={init:a,open:s,close:p,isVisible:r}},function(e,t,i){var n=i(20),o={},a=function(e){o[e.id]=e.callback;var t=n.init(e);return r(t.contentWindow.document),t},r=function(e){e.addEventListener("touchmove",function(e){e.preventDefault()}),e.addEventListener("click",function(e){for(var t=e.target;t&&t!=document;t=t.parentNode){var i=t.className;if("string"==typeof i){if(~i.indexOf("mui-confirm-inner"))break;if(~i.indexOf("mui-confirm ")){c(-2);break}if(~i.indexOf("mui-confirm-btn")){c(Array.prototype.slice.call(t.parentNode.children).indexOf(t));break}}}})},s=function(e){return n.isVisible(e)},p=function(e){return n.open(e)},c=function(e,t){var i=s(t);if(i){var a=o[i.id];if(a){var r=i.contentWindow.document.querySelector('input[type="checkbox"]');if(a({index:e,checked:r?r.checked:void 0})===!1)return!1}return n.close(t),!0}return!1};e.exports={init:a,open:p,close:c,isVisible:s}},function(e,t,i){var n=i(8),o=function(e){e=JSON.parse(e);for(var t=[],i=e.urls,n=e.w||0,o=e.h||0,a=0,r=i.length;r>a;a++)t.push({src:i[a],w:n,h:o});var s=new PhotoSwipe(document.querySelector(".pswp"),PhotoSwipeUI_Default,t,e);0!==n&&0!==o||s.listen("gettingData",function(e,t){if(!t.loading&&(t.w<1||t.h<1)){t.loading=!0;var i=new Image;i.onload=function(){t.w=this.width,t.h=this.height,s.invalidateCurrItems(),s.updateSize(!0),t.loading=!1},i.src=t.src}}),s.listen("close",function(){plus.webview.currentWebview().close("auto")}),s.init()},a="__W2A_SWIPER",r=function(e){e=n.extend({index:0,pinchToClose:!1,closeOnScroll:!1},e),e.history=!1;var t=plus.webview.getWebviewById(a);t?(t.show("fade-in",200),t.evalJS("("+Function.prototype.toString.call(o)+")('"+JSON.stringify(e)+"')")):(plus.nativeUI.showWaiting(),t=plus.webview.create("_www/"+(e.url||"__wap2appswiper.html"),a,{background:"transparent",hardwareAccelerated:!0,scrollIndicator:"none"}),t.addEventListener("titleUpdate",function(){t.show("fade-in",200)}),t.addEventListener("loaded",function(){plus.nativeUI.closeWaiting(),t.evalJS("("+Function.prototype.toString.call(o)+")('"+JSON.stringify(e)+"')")}))};e.exports=r},function(module,exports,__webpack_require__){var _=__webpack_require__(8),dom=__webpack_require__(11),spa=__webpack_require__(10),gps=__webpack_require__(24),share=__webpack_require__(14),report=__webpack_require__(16),Const=__webpack_require__(13),previewImage=__webpack_require__(22),W2AWebview=function(e){this._init(e)},proto=W2AWebview.prototype;proto._init=function(e){this.webview=!1,this.options=e,this._initWebview(),this._initQuit(),this._initPreviewImage(),this._initReport()},proto._initWebview=function(){var options=this.options;if(_.plusReady(function(){this.webview=plus.webview.currentWebview();var e=this.webview.__wap2app_opener_id;this.opener=e?plus.webview.getWebviewById(e):!1,this.opener&&(document.referrer=this.opener.getURL()),this._handleBack(),this._handleGps(),this._handleNativeView(),this._handleShare()}.bind(this)),options.injectStyle&&dom.ready(function(){var e=document.createElement("style");e.appendChild(document.createTextNode(options.injectStyle)),document.head.appendChild(e)}),options.injectScript)try{"function"==typeof options.injectScript?(options.injectScript=Function.prototype.toString.call(options.injectScript),eval("("+options.injectScript+")()")):eval("("+options.injectScript+")")}catch(e){console.log(e)}setTimeout(function(){dom.ready(function(){options.group&&options.group.activate&&this._handleGroupActivate(options.group.activate,options.group),this.fixed(this.options.fixed)}.bind(this))}.bind(this),200)},proto._initReport=function(){var e=this.options.report;if(e){var t=e.dom;t&&("string"==typeof t&&(t=[t]),dom.ready(function(){setTimeout(function(){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];document.querySelector(o)||e.push(o)}e.length&&report.dom(window.location.href,this.webview.id,"DOM"+JSON.stringify(e)+"\u4e0d\u5b58\u5728")}.bind(this),1e3)}.bind(this)))}},proto._initPreviewImage=function(){var e=this.options.previewImage;"string"==typeof e&&(e={selector:e});var t=e.selector;t&&window.addEventListener("click",function(i){var n=i.target;if("function"==typeof t)for(;n&&n!==document;n=n.parentNode){var o=t(i.target);if(_.isObject(o)){previewImage(_.extend(e.options,{url:e.url,index:o.index,urls:o.urls,w:o.w,h:o.h})),i.stopPropagation(),i.preventDefault();break}}else if("string"==typeof t){for(var a=Array.prototype.slice.call(document.querySelectorAll(t)),r=[],s=0,p=a.length;p>s;s++)r.push(a[s].src);for(;n&&n!==document;n=n.parentNode){var c=a.indexOf(n);if(~c){var l=n.naturalWidth,h=n.naturalHeight;previewImage(_.extend(e.options,{url:e.url,index:c,urls:r,w:l,h:h})),i.stopPropagation(),i.preventDefault();break}}}}.bind(this),!0)},proto._initQuit=function(){this.options.quit&&this.webview.appendJsFile("_www/__wap2appquit.js")},proto._handleNativeView=function(){if(_.supportNativeObj()){var e=this.options.screenshot&&this.options.screenshot.view;if(e&&e.enable&&("dock"===e.styles.position||e.interceptTouchEvent)){var t=plus.nativeObj.View.getViewById(this.webview.id+"_nativeView");if(t&&"function"==typeof t.addEventListener){var i=e.click;i&&t.addEventListener("click",function(e){for(var t in i)if(i.hasOwnProperty(t)){var n=i[t];if(_.isCross(e.pageX,e.pageY,n.rect)){n.handle();break}}}.bind(this))}}}},proto._handleGps=function(){var e=this.options;if(e.gps.enable){var t=plus.storage.getItem(Const.W2A_GPS_TIME);(!t||_.now()-parseInt(t,10)>60*e.gps.interval*1e3)&&setTimeout(function(){this._checkGps()}.bind(this),10)}},proto._checkGps=function(){var e=this.options.gps;gps.isEnabled(e.disabledMsg)?gps.checkPermission(function(){this.webview.reload()}.bind(this),e.forbiddenMsg)&&plus.storage.setItem(Const.W2A_GPS_TIME,_.now()+""):plus.storage.setItem(Const.W2A_GPS_TIME,_.now()+"")},proto._handleGroupReport=function(e,t,i,n){if(t){for(var o=e.querySelectorAll("*"),a=[],r=wap2app.getW2AOptions(),s=0,p=o.length;p>s;s++){var c=o[s];if(dom.elementMatch(c,t)){var l=c;if("A"!==c.tagName&&(l=c.querySelector("a")),l){var h="";n&&(h=l.getAttribute(n)),h||(h=l.href);var d=dom.getLocation(h);if(i&&_.isMatch(d,{pathname:i}))continue;var u=r.getWebviewOptionsByUrl(h);u.group||a.push(h)}}}a.length&&report.pathname(window.location.href,this.webview.id,"GROUP"+JSON.stringify(a)+"\u672a\u5339\u914d\u5230")}},proto._handleGroupActivate=function(e,t){if(e&&_.isObject(e)&&e.container&&e.itemMatch&&e.itemActiveClass){var i=document.querySelector(e.container);if(i){for(var n=e.activate,o=e.deactivate,a=e.itemMatch,r=e.attribute,s="",p=e.itemActiveClass||"",c=e.itemActiveClass.split(" "),l=t.report.ignore,h=0;h<c.length;h++)s+="."+c[h].replace(/\s+/g,"");var d=this;setTimeout(function(){d._handleGroupReport(i,a,l,r)},1e3),n||(n=function(e){for(var t=e;t&&t!==i;t=t.parentNode)if(dom.elementMatch(t,a)){t.className+=" "+p;break}}),o||(o=function(e){for(var t=e;t&&t!==i;t=t.parentNode)if(dom.elementMatch(t,a)){t.className=t.className.replace(p,"");break}});var u=i.querySelector(s);i.addEventListener("click",function(e){for(var t=e.target;t&&t!==document;t=t.parentNode)if("A"===t.tagName){var i="";if(r&&(i=t.getAttribute(r)),i||(i=t.href),i){var a=dom.getLocation(i);if(~["http:","https"].indexOf(a.protocol)){i=a.href,e.preventDefault(),e.stopPropagation(),o(u),n(t),function(){setTimeout(function(){o(t),n(u)},150)}(u,t),function(e){setTimeout(function(){wap2app.open(e)},10)}(i);break}}}}.bind(this),!0)}}},proto._handleShare=function(){this.options.share&&share.init()},proto.fixed=function(e){_.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var i=e[t];if(_.isObject(i)&&i.selector){var n=document.querySelector(i.selector);if(n){var o=dom.getStyles(n,"position");if("fixed"!==o){var a=i.styles;if(a)for(var r in a)a.hasOwnProperty(r)&&(n.style[r]=a[r]);n.style.position="fixed";var s=document.createElement("div");s.className="__wap2app_fixed_placeholder",s.setAttribute("style","height:"+(a.height||n.offsetHeight+"px")+";width:100%;"),n.parentNode.insertBefore(s,n)}}}}},proto._handleBack=function(){this.options.back.enable&&(this._overrideHistory(),this._handleBackClick(),this.options.back.backbutton&&this._handleBackButtonClick(),this.opener&&plus.storage.removeItem(Const.W2A_WEBVIEW_LOADING+this.opener.id))},proto._handleBackButtonClick=function(){plus.key.addEventListener("backbutton",function(){this.back()}.bind(this))},proto._handleBackClick=function(){var e=this.options,t=e.back,i=t.selector;if(i){var n=this,o=function(e){var t=document.querySelectorAll(i);if(t&&t.length)for(var n=e.target;n&&n!==document;n=n.parentNode)for(var o=0,a=t.length;a>o;o++)if(n===t[o])return n;return!1},a=function(t){var i=o(t);i&&(i.__w2a_fastclick&&(i.__w2a_fastclick=!1,i.className=i.className.replace(" "+e.fastclick.className,"")),n.back(),t.preventDefault(),t.stopPropagation())};window.addEventListener(t.eventType,a,!0),"click"!==t.eventType&&window.addEventListener("click",a,!0),e.fastclick&&window.addEventListener("touchstart",function(t){var i=o(t);i&&(i.__w2a_fastclick=!0,i.className=i.className+" "+e.fastclick.className)},!0)}},proto._overrideHistory=function(){if(this.options.back.override){
var e=this,t=function(t){return function(i){location.hash?t.apply(window.history,[i]):e.back()}};window.history.back=t(window.history.back),window.history.go=t(window.history.go)}},proto._handleBeforeBack=function(e){var t=this.options;if(e&&(("function"==typeof e||_.isObject(e))&&(e=[e]),_.isArray(e)&&e.length))for(var i=0;i<e.length;i++){var n=e[i];if("function"==typeof n&&n()===!1)return!1;if(_.isObject(n))for(var o in n)if(n.hasOwnProperty(o)){var a=n[o];"string"==typeof a&&(a={selector:a,eventType:"click"});var r=document.querySelectorAll(o);if(r&&r.length)for(var s=0;s<r.length;s++){var p=r[s];if(p&&"none"!==dom.getStyles(p,"display")){var c=!1;if(c=a.selector?document.querySelector(a.selector):p)return t.fastclick&&(c.className=c.className+" "+t.fastclick.className),wap2app.trigger(c,a.eventType),t.fastclick&&(c.className=c.className.replace(" "+t.fastclick.className,"")),!1}}}}return!0},proto.open=function(e){wap2app.open(e)},proto.back=function(){var e=this.options,t=e.back,i=(t.beforeBack,this._handleBeforeBack(t.beforeBack));if(i!==!1){var n=e.show,o=n.aniShow||"pop-in",a=n.duration||300;o=~o.indexOf("in")?o.replace("in","out"):o.replace("out","in");var r=e.parent&&"browser"!==e.parent?this.webview.parent():this.webview,s=t.history,p=!0;"boolean"==typeof s?p=s:s&&(p=_.isMatch(window.location,{matchPathnames:s}));var c=!1;"function"==typeof t.handle&&(c=t.handle(r,p,e)),c===!1&&("spa"===e.mode?this.webview.canBack(function(e){e.canBack?spa.back(o,a,function(e){history.back()},{showWaiting:t.showWaiting,delay:t.delay}):wap2app.back(p)}.bind(this)):wap2app.back(p))}},module.exports=W2AWebview},function(e,t,i){var n=i(9),o=i(17),a=["\u786e\u5b9a","\u53d6\u6d88"],r=!1;e.exports={isEnabled:function s(e,t){if("iOS"===plus.os.name)return!0;if(!r){var s=!0;try{var i=plus.android.runtimeMainActivity(),n=i.getSystemService("location"),p=plus.android.importClass(n),c=n.isProviderEnabled(p.GPS_PROVIDER);c||(s=!1)}catch(l){s=!1}return s||("function"==typeof e&&(t=e,e=""),(e||t)&&(e=e||"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd","Android"===plus.os.name&&(r=!0,plus.nativeUI.confirm(e,function(e){0===e.index?(o.openLocationSource(),t&&t()):r=!1},"\u63d0\u793a",a)))),s}},checkPermission:function(e,t,i){if("iOS"===plus.os.name)return!0;if(!r){var s=!0;try{var p=plus.android.runtimeMainActivity(),c=plus.android.importClass("android.os.Build"),l=(plus.android.importClass("android.provider.Settings"),plus.android.importClass("android.content.Context"));if(c.VERSION.SDK_INT>=19){var h=p.getSystemService(l.APP_OPS_SERVICE),d=plus.android.importClass(h),u=p.getPackageManager();plus.android.importClass(u);var w=u.getPackageInfo(p.getPackageName(),0),v=plus.android.getAttribute(plus.android.getAttribute(w,"applicationInfo"),"uid"),f=p.getPackageName();"io.dcloud.streamapp"===f&&(f="com.qihoo.appstore");var _=h.checkOp(d.OPSTR_COARSE_LOCATION,v,f);if(_==d.MODE_ERRORED){var b;b=plus.android["implements"]("android.app.AppOpsManager$OnOpChangedListener",{onOpChanged:function(t,i){var n=h.checkOp(d.OPSTR_COARSE_LOCATION,v,f);t==d.OPSTR_COARSE_LOCATION&&n==d.MODE_ALLOWED&&(e&&e(),h.stopWatchingMode(b))}}),h.startWatchingMode(d.OPSTR_COARSE_LOCATION,f,b),s=!1}}}catch(m){console.log(m)}return s||("function"==typeof t&&(i=t,t=""),(t||i)&&(t=t||"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650",plus.runtime.getProperty(plus.runtime.appid,function(e){var s=e.name;n.qihoo?s="360\u624b\u673a\u52a9\u624b":n.stream&&(s="\u6d41\u5e94\u7528"),t=t.replace("{app}",s),"Android"===plus.os.name&&(r=!0,plus.nativeUI.confirm(t,function(e){0===e.index?(o.openApplicationDetail(),i&&i()):r=!1},"\u63d0\u793a",a))}))),s}}}},function(e,t,i){var n=i(8),o=i(9),a=i(11),r=i(26),s=i(10),p=i(19),c=i(13),l=i(27),h={},d={},u=c.SCREENSHOT_PATH,w=function(e){this.options=e.globalOptions,this.w2aOptions=e,this.loading=!1,this.backing=!1,this.nativeObjViews={},this.nativeObjBitmaps={},this.appName="",this._init()},v=w.prototype;v._init=function(){this._initInfo(),this._initStack(),this._initEvent(),this._initSmsListener(),this._initScreenshots(),this._initBrowser(),this._initArgs()},v._initInfo=function(){var e=c.W2A_APP_NAME+"_"+plus.runtime.version;this.appName=plus.storage.getItem(e),this.appName||plus.runtime.getProperty(plus.runtime.appid,function(t){this.appName=t.name,plus.storage.setItem(e,this.appName)}.bind(this))},v._initArgs=function(){var e=p();e&&e.url&&wap2app.open(e.url,"",plus.runtime.appid)},v._addContext=function(e){h[e.id]=e},v.removeContext=function(e,t){if(e===plus.runtime.appid)return!1;var i=h[e];if(i&&(i.clear(),delete h[e],t!==!1&&i.options.group))for(var n=i.webview.__wap2app_group.split(c.W2A_GROUP_SPLIT),o=0,a=n.length;a>o;o++)this.removeContext(n[o],!1)},v.getContext=function(e){return h[e]},v.getContexts=function(){return h},v.currentContext=function(){for(var e=plus.webview.all(),t=e.length-1;t>=0;t--){var i=e[t];if("normal"===i.__wap2app_type||"home"===i.__wap2app_type||i.id===plus.runtime.appid)return h[i.id]}return!1},v.size=function(){var e=0;for(var t in h)++e;return e},v.clearContext=function(){for(var e in h)e!==plus.runtime.appid&&this.removeContext(e)},v._initStack=function(){var e=this.w2aOptions.homeWebviewOptions;this._addContext(new l(this,e.url,e,void 0,!0)),this._preloadWebviewContext(e)},v._initEvent=function(){document.addEventListener("newintent",function(){this._initArgs()}.bind(this),!1),plus.key.addEventListener("backbutton",function(){this.back()}.bind(this))},v._initSmsListener=function(e){var t=this.options.sms;if("function"==typeof t)setTimeout(function(){r.register(function(e){for(var i=0,n=e.length;n>i&&!t(e[i].getDisplayMessageBody());i++);})},100);else if(n.isObject(t)){var i=t.callback;if(n.isObject(t.callback)&&t.callback.webviewId){var o=t.callback.handle,a=t.callback.webviewId;"function"==typeof a&&(a=a()),"string"==typeof a&&(a=[a]),n.isArray(a)&&a.length&&(i=function(e){for(var t=0;t<a.length;t++){var i=plus.webview.getWebviewById(a[t]);if(i){i.evalJS("("+Function.prototype.toString.call(o)+")("+e+")");break}}})}if("function"==typeof i){var s=t.match;setTimeout(function(){r.register(function(e){for(var t=0,n=e.length;n>t;t++){var o=e[t].getDisplayMessageBody();if(~o.indexOf(s.sign)){var a=new RegExp("([0-9]{"+s.length+"})"),r=o.match(a);if(r&&2===r.length){i(r[1]);break}}}})},100)}}},v._initScreenshots=function(){var e=this;u=u+plus.runtime.appid+"/";var t=e.w2aOptions.webviewsOptions;for(var i in t){var o=t[i].screenshot;if(o&&o.url){var a=o.url;"string"==typeof a&&(a=[a]);for(var r=0;r<a.length;r++)d[a[r]]=!1}}setTimeout(function(){n.supportNativeObj()&&e._initNativeObjView(),e._initScreenshotWebview()},100)},v._initScreenshotWebview=function(){var e=this;for(var t in d)if(d.hasOwnProperty(t)&&!d[t]){if(d[t]=!0,n.supportNativeObj()){var i=new plus.nativeObj.Bitmap(t);i.load(u+encodeURIComponent(t)+".png",function(){e._initScreenshotWebview()},function(n){i.clear(),i=null,e._initNativeObjScreenshotWebview(t)})}else{var o=plus.webview.create("_www/"+t,t,null,{__wap2app_type:"screenshot"});o.addEventListener("loaded",function(){e._initScreenshotWebview()})}break}},v._initNativeObjView=function(){var e=new plus.nativeObj.View(c.W2A_VIEW_ID);e.show(),e.hide(),"function"==typeof e.addEventListener&&e.addEventListener("click",function(e){var t=e.pageX,i=e.pageY;60>=t&&60>=i&&wap2app.getContext().back()}),"function"==typeof e.interceptTouchEvent&&e.interceptTouchEvent(!0),this.nativeObjViews[e.id]=e;var t=new plus.nativeObj.View(c.W2A_OTHER_VIEW_ID);t.show(),t.hide(),"function"==typeof t.interceptTouchEvent&&t.interceptTouchEvent(!0),this.nativeObjViews[t.id]=t,this.nativeObjBitmaps[c.W2A_BITMAP_ID]=new plus.nativeObj.Bitmap(c.W2A_BITMAP_ID),this.nativeObjBitmaps[c.W2A_OTHER_BITMAP_ID]=new plus.nativeObj.Bitmap(c.W2A_OTHER_BITMAP_ID)},v._initNativeObjScreenshotWebview=function(e){var t=this,i=function(e){var i=e.id;if(!(window.innerHeight+100<plus.display.resolutionHeight)){if("file:///android_asset/data/error.html"===e.getURL())return void e.close("auto");var n=new plus.nativeObj.Bitmap(i);e.draw(n,function(){n.save(u+encodeURIComponent(i)+".png",{},function(){t.nativeObjBitmaps[i]=n,e.close("auto"),t._initScreenshotWebview()},function(e){n.clear(),n=null,t._initScreenshotWebview()})},function(e){n.clear(),n=null,t._initScreenshotWebview()})}},n=plus.webview.getWebviewById(e);n?setTimeout(function(){i(n)},350):(o.wkwebview?(n=plus.webview.create("_www/"+e,e,{zindex:-1},{__wap2app_type:"screenshot"}),n.show("none")):n=plus.webview.create("_www/"+e,e,null,{__wap2app_type:"screenshot"}),n.addEventListener("loaded",function(){setTimeout(function(){i(n)},200)}))},v._initBrowser=function(){this.getBrowser()},v.getBrowser=function(e,t){var i=this,o=e&&a.getLocation(e)||{},r=plus.webview.getWebviewById(c.W2A_BROWSER_ID);if(!r||t){var s=this.w2aOptions.globalOptions.browser,p=s.url;"function"==typeof p&&(p=p(o.pathname,o)),p||(p="__wap2appbrowser.html"),r=plus.webview.create("_www/"+p,c.W2A_BROWSER_ID,this._getBrowserStyles(o),{__wap2app_type:"parent",__wap2app_parent_type:"browser"});var l=function(){var e=[],t=n.extend(i.options.browser),o=i.options.browser.styles;for(var a in o)if(o.hasOwnProperty(a)){var s=[],p=o[a];for(var c in p)s.push(c+":"+p[c]+";");e.push(a+"{"+s.join("")+"}")}t.styles=e.join(""),r.evalJS("wap2app_browser.init('"+JSON.stringify(t)+"')"),r.removeEventListener("loaded",l)};r.addEventListener("loaded",l)}else r.setStyle(this._getBrowserStyles(o));return r},v._getBrowserStyles=function(e){var t=this.w2aOptions.globalOptions.browser,i={hardwareAccelerated:!0,popGesture:"hide",height:parseInt(t.header.height,10)+1},n=t.dock;"function"==typeof n&&(n=n(e.pathname||"",e));"undefined"!=typeof t.pullToRefresh;return n?(i.position="dock",i.dock="top"):(i.position="absolute",i.dock=""),i},v._openBySpa=function(e,t,i){s.open(t,e.id,"replace"===i)},v._openBySelf=function(e,t,i,n,o){e.overrideUrlLoading({mode:"allow",match:c.W2A_OVERRIDE_MATCH}),setTimeout(function(){"reload"===n?e.evalJS("window.location.reload();"):o?this._openBySpa(e,t,n):"replace"===n?e.evalJS('window.location.replace("'+t+'");'):e.evalJS('window.location.href = "'+t+'";');var i=this.getContext(e.id);i&&i.handleOverrideUrlLoadingReject()}.bind(this),50)},v._openByScheme=function(e,t){e.overrideUrlLoading({mode:"allow",match:c.W2A_OVERRIDE_MATCH}),setTimeout(function(){e.evalJS('window.location.href="'+t+'";');var i=this.getContext(e.id);i&&i.handleOverrideUrlLoadingReject()}.bind(this),50)},v._openByBlank=function(e,t,i,n){var o=this;if(i=i||"",!o.loading){var r=function(){t=a.getLocation(t).href;var r=o.w2aOptions.getWebviewOptionsByUrl(t);r.url=t,r.title=i,setTimeout(function(){o.loading=!1},r.group?0:1500),r.isHome&&o.clear(),o._addContext(new l(o,t,r,e.id,!1,n)),o._preloadWebviewContext(r)};o.loading=!0,window.innerHeight+100<plus.display.resolutionHeight?(document.activeElement.blur(),setTimeout(function(){r()},300)):r()}},v._preloadWebviewContext=function(e){if(e.preload){var t=e.preload;"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++){var n=wap2app.getW2AOptions().getWebviewOptionsById(t[i]);n.extras.__wap2app_preload=!0,new l(this,n.url,n,e.id,!0)}}},v.open=function(e,t,i,n,o,r,s){e=e||"blank",o=o||"href",r=r!==!1;var p=a.getLocation(i);if("self"===e){if(!~["http:","https:","file:"].indexOf(p.protocol))return void this._openByScheme(t,i);this._openBySelf(t,i,n,o,r)}else"blank"===e&&this._openByBlank(t,i,n,s)},v._back=function(e){var t=this.currentContext();t&&t.back(e)};var f=!1;v.back=function(e){var t=n.now();f&&500>t-f&&this.size()>1||(f=t,this._back(e))},v.close=function(){var e=this.currentContext();e&&e.close()},v.quit=function(){if(this.size()){var e=this.currentContext();e?e.quit():this.getContext(plus.runtime.appid).quit()}},v.getWebviewContextById=function(e){return this.getContext(e)},v.clear=function(){this.clearContext(),setTimeout(function(){for(var e=plus.webview.all(),t=0,i=e.length;i>t;t++){var n=e[t];if("normal"===n.__wap2app_type&&!n.__wap2app_preload&&n.id!==plus.runtime.appid){var o=n.parent();o?o.close("none"):n.close("none")}}},20)},v.getViewById=function(e){var t=this.nativeObjViews[e];return t||(t=plus.nativeObj.View.getViewById(e),this.nativeObjViews[e]=t),t},v.getBitmapById=function(e){var t=this.nativeObjBitmaps[e];return t||(t=plus.nativeObj.Bitmap.getBitmapById(e),this.nativeObjBitmaps[e]=t),t},e.exports=w},function(e,t,i){var n,o,a,r=i(8).plusReady,s=[],p=!1,c=!1,l=!1,h=function(e){if("Android"===plus.os.name)try{var t=plus.runtime.innerVersion.split(".");l=parseInt(t[t.length-1])<22298,a=plus.android.runtimeMainActivity();var i=(plus.android.importClass("android.content.Intent"),plus.android.importClass("android.content.IntentFilter")),r=plus.android.importClass("android.telephony.SmsMessage"),p="io.dcloud.feature.internal.reflect.BroadcastReceiver";l&&(p="io.dcloud.feature.internal.a.a"),o=new i;var c=function(e,t){try{var i=t.getAction();if("android.provider.Telephony.SMS_RECEIVED"==i){for(var n=t.getSerializableExtra("pdus"),o=[],a=0,p=n.length;p>a;a++)o.push(r.createFromPdu(n[a]));for(var a=0,p=s.length;p>a;a++)s[a](o)}}catch(c){}};n=plus.android["implements"](p,{a:c,onReceive:c}),o.addAction("android.provider.Telephony.SMS_RECEIVED"),e&&e()}catch(h){}},d=function(e){if(s.push(e),p){if(!c)try{l?a.a(n,o):a.registerReceiver(n,o)}catch(t){}}else p=c=!0,r(function(){h(function(){setTimeout(function(){try{l?a.a(n,o):a.registerReceiver(n,o)}catch(e){}},300)})})},u=function(e,t){for(var i=0,o=s.length;o>i;i++)s[i]===e&&s.splice(i,1);if(t&&!s.length&&a&&c){try{l?a.a(n):a.unregisterReceiver(n)}catch(r){}c=!1}};e.exports={register:d,unregister:u}},function(e,t,i){var n=i(8),o=i(11),a=i(10),r=i(17),s=i(18),p=i(13),c=i(12),l=function(e,t,i,n,o,a){i||(i=t,t=!1),this._init(e,i,a),this._create(n,o)},h=l.prototype;h._init=function(e,t,i){this.w2aContext=e,this.id=t.id,this.uuid=n.now(),this.opener=!1,this.webview=!1,this.relatedView=!1,this.nativeView=!1,this.titleUpdateTimer=!1,this.canTitleUpdateTimer=!1,this.backing=!1,this.showing=!1,this.shown=!1,this.loaded=!1,this.cleared=!1,this.animating=!1,this.canTitleUpdate=!1,this.history=[],this.options=t,this.callback=i,this.redirect_url=!1},h._create=function(e,t){n.plusReady(function(){this._hasNetwork(e,t)&&this._createWebview(e,t)}.bind(this))},h._createWebview=function(e,t){var i=this.options;this.opener=e&&plus.webview.getWebviewById(e),this.webview=plus.webview.getWebviewById(i.id),i.id===plus.runtime.appid&&(this.shown=!0);var a=!1;if(!this.opener||this.opener.id!==i.id){var r=this.opener&&this.opener.__wap2app_group,s=i.extras.__wap2app_group;if(!r&&this.opener){var c=this.w2aContext.w2aOptions.homeWebviewOptions;this.opener.id===plus.runtime.appid&&(r=c.extras.__wap2app_group)}s&&s===r&&(a=!0)}var l=!1;if(!this.webview||this.webview.id===plus.runtime.appid||a||i.extras.__wap2app_group||(this.webview.id!==e&&(this.webview.close("none"),l=!0),this.webview=null),this.webview){if(this.webview.__wap2app_preload,i.isHome&&(this.canTitleUpdate=!0),!i.isHome&&this.webview.__wap2app_event||this._initPlusWebview(),t)return this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),void(this.loadedTimer&&clearTimeout(this.titleUpdateTimer));!!this.webview.__wap2app_group||!!i.group;if(i.url){this._initOverrideResourceRequest();var h=!1;if("boolean"!=typeof i.reload?h=n.isMatch(o.getLocation(i.url),{matchPathnames:i.reload}):i.reload&&(h=!0),h||(h=!!this.webview.__wap2app_preload),h?(i.id===e||this._isBrowserWebview()||this._createScreenShot(),this.webview.overrideUrlLoading({mode:"allow",match:p.W2A_OVERRIDE_MATCH}),setTimeout(function(){this.webview.evalJS('window.location.replace("'+i.url+'")'),this.handleOverrideUrlLoadingReject()}.bind(this),50)):(this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.loadedTimer&&clearTimeout(this.titleUpdateTimer),setTimeout(function(){plus.nativeUI.closeWaiting()},30)),this.webview.__wap2app_preload)this.webview.setStyle({zindex:0}),this._createAppend();else{var d=(i.show,"none"),u=0,w=i.parent&&"browser"!==i.parent?this.webview.parent():this.webview;w||(w=this.webview),"browser"===w.__wap2app_parent_type&&this.webview.clear(),w.hide("none"),setTimeout(function(){w.show(d,u,function(){plus.nativeUI.closeWaiting()}.bind(this))}.bind(this),50)}}}else a&&!this.nativeView&&this._createNativeView(),this.opener.id===i.id||a||("browser"!==i.parent&&(t||this._createScreenShot()),t||this._createAppend(l)),i.extras.__wap2app_opener_id=e,i.extras.__wap2app_event=!t,i.extras.__wap2app_url=i.url,i.extras.__wap2app_preload&&(i.styles.zindex=-1),i.styles.errorPage&&0===i.styles.errorPage.indexOf("_www")&&(i.styles.errorPage=plus.io.convertLocalFileSystemURL(i.styles.errorPage)),this.webview=plus.webview.create(i.url,i.id,i.styles,i.extras),t||this._prepareLoading(),i.listenResourceLoading&&i.listenResourceLoading.match&&this._listenResourceLoading(),this._initOverrideResourceRequest(),i.blockNetworkImage&&this.webview.setBlockNetworkImage(!0),this.webview.overrideUrlLoading({mode:"allow",match:p.W2A_OVERRIDE_MATCH},function(e){}.bind(this)),a&&!t?this._createGroupScreenshot():r&&setTimeout(function(){this._clearGroup(r)}.bind(this),500),this._isBrowserWebview()?(this.webview.append(this.relatedView),this.webview.show(i.show.aniShow,i.show.duration)):this._hasParentWebview()&&(this.webview.hide(),this.relatedView.append(this.webview)),this._hasNativeView()&&this.webview.append(this.nativeView.view),t||this._initPlusWebview()},h._clearGroup=function(e){for(var t=e.split(p.W2A_GROUP_SPLIT),i=0,n=t.length;n>i;i++){var o=t[i];this.opener.id!==o&&o!==plus.runtime.appid&&plus.webview.close(o,"none")}},h._listenResourceLoading=function(){"function"==typeof this.webview.listenResourceLoading&&this.webview.listenResourceLoading({match:this.options.listenResourceLoading.match},function(e){}.bind(this))},h._initOverrideResourceRequest=function(){if("function"==typeof this.webview.overrideResourceRequest){var e=this.options.overrideResourceRequest;n.isObject(e)&&(e=[e]),e&&e.length&&this.webview.overrideResourceRequest(e)}},h._initPlusWebview=function(){var e=this.options;if(!e.isHome){this.webview.appendJsFile("_www/__wap2app.js"),this.webview.appendJsFile("_www/__wap2appconfig.js");var t=e.appendJsFile;if("string"==typeof t&&t&&(t=[t]),n.isArray(t))for(var i=0,o=t.length;o>i;i++)t[i]&&this.webview.appendJsFile("_www/"+t[i])}if(this._handleEvent(),this.handleOverrideUrlLoadingReject(),e.pullToRefresh&&e.pullToRefresh.support){var a=e.pullToRefresh.callback;this.webview.setPullToRefresh(e.pullToRefresh,function(){a?a(this.webview):(this.webview.endPullToRefresh(),this.webview.reload())}.bind(this))}},h._hasNativeView=function(){return!!this.nativeView},h._hasParentWebview=function(){return this.relatedView&&"parent"===this.relatedView.__wap2app_type},h._hasScreenshot=function(){return this.relatedView&&"screenshot"===this.relatedView.__wap2app_type},h._isBrowserWebview=function(){return this._hasParentWebview()&&"browser"===this.relatedView.__wap2app_parent_type},h._createGroupScreenshot=function(){if(n.supportNativeObj()){var e=this.options.group,t=plus.nativeObj.Bitmap.getBitmapById(p.W2A_BITMAP_ID);t&&(this.relatedView=new c(t.id,this.opener,e),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="group",this.relatedView.show("none",0,function(e){e||(this.relatedView=!1)}.bind(this)))}},h._createScreenShot=function(){var e=this.options.show,t=this.options.screenshot,i=!0;if(t&&t.url){var o=this._getScreenshot();o&&(i=!1,n.supportNativeObj()?(!this.nativeView&&this._createNativeView(),this._drawTexts&&(t=n.extend(t,{drawText:this._drawTexts})),this.relatedView=new c(o,this.opener,t),this.relatedView.__wap2app_type="screenshot",this.relatedView.show(e.aniShow,e.duration,function(e){e?this.animating=!0:(this.relatedView=!1,this._createScreenShotFallback(o,this.options.show))}.bind(this),function(){this.canTitleUpdate=!0,"startAnimation"===e.eventType&&this._titleUpdate()}.bind(this))):(this.relatedView=!1,this._createScreenShotFallback(o,this.options.show)))}i&&(this.canTitleUpdate=!0)},h._getScreenshot=function(){if("function"==typeof this.options.screenshot.handle){var e=o.getLocation(this.options.url);return this.options.screenshot.handle(e.pathname,e)}return this.options.screenshot.url},h._createNativeView=function(){var e=this.options.screenshot;if(e.view&&e.view.enable){var t=this._getScreenshot(),i=plus.nativeObj.Bitmap.getBitmapById(t);if(i){var n=e.view,o=this.options.id+"_nativeView";this.nativeView=new c(o,n.styles,!1,e);var a=this.nativeView.view;"dock"===n.styles.position?"function"==typeof a.interceptTouchEvent&&a.interceptTouchEvent(!0):n.interceptTouchEvent&&"function"==typeof a.interceptTouchEvent&&a.interceptTouchEvent(!0),a.drawBitmap(i,n.crop.src,n.crop.dest),this._drawTexts=this.nativeView.drawTexts(a,e.drawText)}}},h._createScreenShotFallback=function(e,t){this.relatedView||(this.relatedView=plus.webview.getWebviewById(e),this.relatedView?this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this)):(this.relatedView=plus.webview.create("_www/"+e,e,null,{__wap2app_type:"screenshot"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(t.aniShow,t.duration,function(){plus.nativeUI.closeWaiting(),this._showW2AViewFallback()}.bind(this))}.bind(this))))},h._showW2AViewFallback=function(){if(this.canTitleUpdate=!0,n.supportNativeObj()){var e=this.relatedView;this._createScreenshotAnimation(function(t){t&&e.hide("none")}.bind(this))}},h._createAppend=function(e){var t=this.options.show,i=this.options.parent;return i&&(this.canTitleUpdate=!0,"browser"===i?(this.relatedView=this.w2aContext.getBrowser(this.options.url,e),this.relatedView.evalJS("wap2app_browser.loading();")):(this.relatedView=plus.webview.create("_www/"+i,this.options.id+"___wap2app_parent",{popGesture:"close",hardwareAccelerated:!0},{__wap2app_type:"parent"}),this.relatedView.addEventListener("titleUpdate",function(){this.relatedView.show(t.aniShow,t.duration)}.bind(this)))),this.relatedView},h._hasNetwork=function(e,t){var i=this.options.network;return i!==!1&&plus.networkinfo.getCurrentType()===plus.networkinfo.CONNECTION_NONE?(plus.nativeUI.confirm("\u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e",function(i){2===i.index?r.openAirPlaneModeSetting():1===i.index?this._create(e,t):0===i.index&&plus.runtime.quit()}.bind(this),"\u63d0\u793a",["\u9000\u51fa","\u91cd\u8bd5","\u8bbe\u7f6e\u7f51\u7edc"]),!1):!0},h._handleEvent=function(){var e=this;this.__loading=function(t){e._loading(t)},this.__titleUpdate=function(t){e._titleUpdate(t)},this.__loaded=function(t){e._loaded(t)},this.options.events.loading&&this.webview.addEventListener("loading",this.__loading),this.options.events.titleUpdate&&(this.titleUpdateTimer=setTimeout(function(){this._titleUpdate()}.bind(this),2e3),this.webview.addEventListener("startAnimation"===this.options.show.eventType?"titleUpdate":this.options.show.eventType,this.__titleUpdate)),this.options.events.loaded&&(this.loadedTimer=setTimeout(function(){this._loaded()}.bind(this),5e3),this.webview.addEventListener("loaded",this.__loaded))},h._prepareLoading=function(){this.showing=!0;var e=this.options.showWaiting!==!1;e&&!this.backing&&this.webview&&this.webview.id!==p.W2A_BROWSER_CHILD_ID&&setTimeout(function(){plus.nativeUI.showWaiting("",{modal:!1,back:"transmit",padlock:!0})},20)},h._loading=function(e){this.backing=!1,this._prepareLoading(),"function"==typeof this.options.loading&&this.options.loading(this.webview,this.backing),this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loading();")},h._createScreenshotAnimation=function(e){var t=this.options.screenshot,i=plus.nativeObj.Bitmap.getBitmapById(this._getScreenshot());if(i){var n=this.relatedView;this.relatedView=new c(i.id,null,t),this.relatedView.__wap2app_type="screenshot",this.relatedView.__wap2app_animate="fallback",this.relatedView.show("none",0,function(t){t||(this.relatedView=n),e&&e(t)}.bind(this))}else e&&e(!1)},h._titleUpdate=function(e){if(this.webview&&!this.backing){var t=e&&e.title||"";if(!t||"http"!==t.substr(0,4)&&"data"!==t.substr(0,4)||(t=""),this._isBrowserWebview())this.relatedView.evalJS("wap2app_browser.setTitle('"+encodeURIComponent(t||"")+"');");else if(this.relatedView&&this.relatedView instanceof c&&this.options.screenshot.title&&this.options.screenshot.title.enable&&!this.relatedView.drewTexts){var i=this.options.screenshot.title.filter;"function"==typeof i&&(t=i(t)),t&&(this.relatedView.setTitle(t,this.webview),this.nativeView&&this.nativeView.setTitle(t,this.webview))}var n=this.options,o=n.show;this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.titleUpdateTimer=!1;var a=function(){if(this.showing){this.showing=!1;var e=this.relatedView?"none":o.aniShow,t=this.relatedView?0:o.duration;this._show(e,t)}};n.delay?setTimeout(function(){a.call(this)}.bind(this),n.delay):a.call(this)}},h._show=function(e,t){if(!this.backing){if(this.shown)return void plus.nativeUI.closeWaiting();var i=this.options;this.shown=!0,this.webview.show(e,t,function(){if(plus.nativeUI.closeWaiting(),this._handleRedirectUrlByCookie(),this.relatedView)if(this.relatedView instanceof c)if("group"===this.relatedView.__wap2app_animate){var e=i.group.animation;this.relatedView.close(e.type,e.duration,function(){this.nativeObjAnimated=!0,"titleUpdate"===i.screenshot.animation.clear.eventType&&this._clearAnimation("titleUpdate")}.bind(this))}else{var e=i.screenshot.animation;this.relatedView.close(e.type,e.duration,function(){this.nativeObjAnimated=!0,"titleUpdate"===i.screenshot.animation.clear.eventType&&this._clearAnimation("titleUpdate")}.bind(this))}else this._hasScreenshot()&&setTimeout(function(){this.relatedView.hide("none")}.bind(this),200);this.callback&&this.callback("shown"),i.blockNetworkImage&&"show"===i.blockNetworkImage&&this.webview.setBlockNetworkImage(!1)}.bind(this))}},h._handleRedirectUrlByCookie=function(){if(this.options.isRedirect){var e=this.options.overrideUrlLoading.redirect.paramName;n.isObject(e)&&e.cookie&&e.cookie.url&&(this.redirect_url=s.get(e.cookie.url,e.cookie.name),this.redirect_url&&(this.redirect_url=decodeURIComponent(this.redirect_url)))}},h._loaded=function(e){if(!this.backing){if(this.loaded)return void setTimeout(function(){plus.nativeUI.closeWaiting()},100);this.loadedTimer&&clearTimeout(this.loadedTimer),this.loadedTimer=!1,this.loaded=!0;var t=this.options;"function"==typeof t.loaded&&t.loaded(this.webview,this.backing),"loaded"===t.screenshot.animation.clear.eventType&&this._clearAnimation("loaded"),this._isBrowserWebview()&&this.relatedView.evalJS("wap2app_browser.loaded();"),!this.options.blockNetworkImage||this.options.blockNetworkImage!==!0&&"loaded"!==this.options.blockNetworkImage||this.webview.setBlockNetworkImage(!1)}},h._clearAnimation=function(e){if(this.relatedView&&this.relatedView instanceof c){var t=this.options,i=0;t.screenshot&&t.screenshot.animation&&t.screenshot.animation.clear.delay&&(i=t.screenshot.animation.clear.delay);var n=function(){this.relatedView.clear(function(){this.animating=!1}.bind(this))};i?setTimeout(function(){n.call(this)}.bind(this),i):n.call(this)}},h._backByView=function(){var e=this.options,t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),this.relatedView.animated?this.relatedView.clear():this.relatedView.back(i,n),this.webview.stop(),this.webview.close("none",0),plus.nativeUI.closeWaiting()},h._back=function(){var e=this.options,t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),plus.nativeUI.closeWaiting();var o=this.webview;if(e.parent&&"browser"!==e.parent&&(o=this.webview.parent(),o||(o=this.webview)),o.__wap2app_group)for(var a=o.__wap2app_group.split(p.W2A_GROUP_SPLIT),r=0;r<a.length;r++){var s=a[r];s!==o.id&&plus.webview.close(s,"none",0)}if(this.webview.__wap2app_preload)o.hide(i,n),setTimeout(function(){o.setStyle({zindex:-1})},n);else{if(o.id===plus.runtime.appid)return void console.log("W2A[w2aWebviewContext]["+o.id+"]:back.close.prevent");(function(e){var t=function(){e.close(i,n)};e.__wap2app_group?setTimeout(function(){t.call(this)}.bind(this),50):t.call(this)}).bind(this)(o)}var c=e.back;c.reload&&setTimeout(function(){this._handleBackReload(c.reload)}.bind(this),100)},h._handleBackReload=function(e){if("function"==typeof e&&(e=e(location.pathname,location)),"boolean"==typeof e?this.opener&&e&&(e=[this.opener.id]):"string"==typeof e&&(e=[e]),n.isArray(e)&&e.length)for(var t=0;t<e.length;t++){var i=plus.webview.getWebviewById(e[t]);i&&i.reload()}},h.close=function(){this._back()},h._backBySpa=function(){if(this.history.length){var e=(this.history[this.history.length-1],this.options),t=e.show,i=t.aniShow||"pop-in",n=t.duration||300;i=~i.indexOf("in")?i.replace("in","out"):i.replace("out","in"),a.back(i,n,this.webview.id,{delay:e.back.delay,showWaiting:e.back.showWaiting})}else this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))},h._backByWebview=function(e){this.webview.canBack(function(e){e.canBack?(this.webview.overrideUrlLoading({mode:"allow",match:p.W2A_OVERRIDE_MATCH}),this.webview.id===p.W2A_BROWSER_CHILD_ID&&this.w2aContext.getBrowser().evalJS("wap2app_browser.showClose();"),setTimeout(function(){this.webview.back(),this.handleOverrideUrlLoadingReject()}.bind(this),50)):this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))}.bind(this))},h.back=function(e){return this.relatedView&&this.relatedView instanceof c&&this.animating?(this.animating=!1,void this._backByView()):(this.backing=!0,e=e!==!1,this.options.isRedirect&&(e=!0),void(e?"webview"===this.options.mode||this.webview.id===p.W2A_BROWSER_CHILD_ID?this._backByWebview():this._backBySpa():this.options.quit?this.quit():(this._back(),this.w2aContext.removeContext(this.webview.id))))},h.quit=function(){this.webview.evalJS("wap2app&&wap2app.quit()")},h.open=function(e,t,i){var a=this.options,r=o.getLocation(e);if(!a.overrideUrlLoading.block||!n.isMatch(r,{matchPathnames:a.overrideUrlLoading.block})){if(~p.W2A_OVERRIDE_IGNORE.indexOf(r.protocol))return void this.w2aContext.open("self",this.webview,e);if(~["http:","https:","file:"].indexOf(r.protocol)){var s=a.isRedirect?a.overrideUrlLoading.redirect:!1;if(!s){var c=this.w2aContext.w2aOptions.getRedirectWebviewOptionsByUrl(i);c&&(s=c.overrideUrlLoading.redirect,a.redirect_id=c.id,a.redirect_url=i,a.isRedirect=!0,a.overrideUrlLoading.redirect=s)}if(s){var l=!1,h=this._handleOverrideUrlLoadingRedirect(r,s),d="self";if("href"===h){var u=wap2app.isConfiged(e);u&&u!==this.webview.id&&(u===a.redirect_id&&(l=!0),d="blank")}else"blank"===h&&(l=!0,d="blank");this.w2aContext.open(d,this.webview,e,t,h,!1,function(e){"shown"===e&&setTimeout(function(){if(l&&this.webview.close("none"),"blank"===h){var e=s.reload;if(typeof e===!0&&(e=[this.opener.id]),"function"==typeof e&&(e=e(r.pathname,r)),"string"==typeof e&&(e=[e]),n.isArray(e))for(var t=0,i=e.length;i>t;t++){var o=plus.webview.getWebviewById(e[t]);o&&o.reload()}}}.bind(this),0)}.bind(this))}else if("history"===a.mode){var h="href",u=wap2app.isConfiged(e),d="self",w=!1;u&&u!==this.webview.id&&(n.isArray(a.history)&&~a.history.indexOf(u)||(d="blank")),"self"===d&&this.webview.id===p.W2A_BROWSER_CHILD_ID&&(w=!1),h&&this.w2aContext.open(d,this.webview,e,t,h,w)}else this._handleTemporary(e,a.overrideUrlLoading.temporary,t,i)||this._handleIgnore(e,t,i)}}},h._handleOverrideUrlLoadingRedirect=function(e,t){var i="href",a=!1;if(t.handle&&(a=t.handle()),!a){var r=!1,p=o.getLocation(this.options.redirect_url||this.options.url),c=t.paramName;
if(c&&("function"==typeof c?r=c():"string"==typeof c&&(c={url:c}),r||(c.url&&(r=n.getUrlParam(c.url,p.search)),!r&&c.cookie&&c.cookie.url&&(r=s.get(c.cookie.url,c.cookie.name),r&&(r=decodeURIComponent(r))),!r&&c.localStorage&&(r=localStorage.getItem(c.localStorage)),!r&&c.sessionStorage&&(r=sessionStorage.getItem(c.sessionStorage)),r||(r=this.redirect_url))),r||(r=t.defaultUrl),r){var p=o.getLocation(r);"function"==typeof t.match?a=t.match(e.pathname,e,p.pathname,p):e.pathname===p.pathname&&(a=!0)}}return a&&(i="blank"),i},h._handleTemporary=function(e,t,i,n){if("function"==typeof t){var a=o.getLocation(e),r=t(a.pathname,a);if(r){var s=plus.webview.getWebviewById(p.W2A_TEMPORARY_WEBVIEW_ID);return s?s.loadURL(e):s=plus.webview.create(e,p.W2A_TEMPORARY_WEBVIEW_ID),s.overrideUrlLoading({mode:"reject",match:r},function(e){this.open(e.url,i,n),s.close("none")}.bind(this)),!0}}return!1},h._handleIgnore=function(e,t,i){var a=this.options,r=!1,s=!1,p=a.ignore,l=a.overrideUrlLoading.ignore,h=a.group,d=o.getLocation(e);if(p&&(r=n.isMatch(d,{matchPathnames:p})),r===!1&&l&&(r=n.isMatch(d,{matchPathnames:l})),r===!1&&h&&n.isMatch(d,{matchPathnames:h.matchPathnames}))return void this.w2aContext.open("blank",this.webview,e,t);if(r===!1&&a.matchPathnames&&n.isMatch(d,a)&&(r=!0),null!==r)if(r){var u=this._getLoadType(d,o.getLocation(i));u&&this.w2aContext.open("self",this.webview,e,t,u,s)}else this.relatedView&&this.relatedView instanceof c&&this.relatedView.setStopped(!0),this.w2aContext.open("blank",this.webview,e,t)},h.clear=function(){this.cleared=!0,this.webview.removeEventListener("loading",this.__loading),this.webview.removeEventListener("titleUpdate",this.__titleUpdate),this.webview.removeEventListener("loaded",this.__loaded),this.titleUpdateTimer&&clearTimeout(this.titleUpdateTimer),this.loadedTimer&&clearTimeout(this.loadedTimer)},h.handleOverrideUrlLoadingReject=function(){var e=this.webview,t=this.options;setTimeout(function(){if("function"==typeof e.overrideUrlLoading&&t.overrideUrlLoading!==!1){var i=!1;e.overrideUrlLoading({mode:"reject",match:".*"},function(e){if(i){var n=+new Date-i;if(50>n)return}i=+new Date;var o=t.overrideUrlLoading.handle;if("function"==typeof o){var a=o(e.url);a&&"string"==typeof a&&(e.url=a)}this.open(e.url,"",this.webview.getURL())}.bind(this))}}.bind(this),t.isHome?0:t.overrideUrlLoading.delay)},h._getLoadType=function(e,t){var i=this.options,a="href";if(this._isReplace(e)&&(a="replace"),"replace"!==a){var r=!1;"boolean"!=typeof i.reload?r=n.isMatch(o.getLocation(i.url),{matchPathnames:i.reload}):i.reload&&(r=!0),e.href!==t.href||r||e.hash!==t.hash&&(a="reload")}return a},h._isReplace=function(e){var t=!1,i=this.options.overrideUrlLoading.replace;return"boolean"==typeof i?t=i:i&&(t=n.isMatch(e,{matchPathnames:i})),t},e.exports=l},function(e,t,i){var n=i(8),o=i(11),a=i(13),r=i(29),s=r.globalOptions,p=r.webviewOptions,c=function(e){this._init(e)},l=c.prototype;l._init=function(e){this.globalOptions={},this.webviewsOptions={},this.homeWebviewOptions={},this.redirectWebviewOptions={},this.globalWebviewOptions={},this.defaultWebviewOptions=p,this._initGlobalOptions(e),this._initWebviewsOptions(e)},l._initGlobalOptions=function(e){var t=n.extend(s);e.lockOrientation&&(t.lockOrientation=e.lockOrientation),e.cookies&&(t.cookies=e.cookies),e.sms&&(t.sms=e.sms),e.feedback===!1?t.feedback=!1:n.isObject(e.feedback)&&(t.feedback=n.extend(t.feedback,e.feedback)),t.browser=n.extend(t.browser,e.browser),t.browser.header={height:parseInt(t.browser.styles[".header"].height,10)},this.globalOptions=t},l._initWebviewsOptions=function(e){var t={};this.globalWebviewOptions=e.globalOptions||e.options;for(var i in e.webviews){var o=this._initWebviewOptions(i,e.webviews[i]);if(i===a.W2A_LAUNCH_WEBVIEW_ID&&(o.quit=!0),i=o.quit?plus.runtime.appid:i,o.id=i,o.quit)o.isHome=!0,o.styles.render="always",o.styles.popGesture="none",o.network=!0,this.homeWebviewOptions=o,o.pullToRefresh=!1;else if(o.overrideUrlLoading){var r=o.overrideUrlLoading.redirect;(r.paramName||r.defaultUrl||r.handle)&&(o.isRedirect=!0,this.redirectWebviewOptions[i]=this._handleRedirectWebviewOptions(o))}if(t[i]=o,o.group){for(var s=[i],p=o.group.matchPathnames,c=0;c<p.length;c++)s.push(i+"_"+c);var l=s.join(a.W2A_GROUP_SPLIT);for(o.extras.__wap2app_group=l,c=0;c<p.length;c++)t[i+"_"+c]=n.extend(o,{id:i+"_"+c,matchPathnames:p[c],isHome:!1,extras:{__wap2app_group:l}})}}var h=this._convertOldVersion(this.globalOptions.browser.webview);if(h.matchHostnames||h.matchPathnames){var o=this._initWebviewOptions(a.W2A_BROWSER_CHILD_ID);o=n.extend(o,h),o.parent="browser",t[a.W2A_BROWSER_CHILD_ID]=o}this.webviewsOptions=t},l._handleRedirectWebviewOptions=function(e){return"boolean"==typeof e.back.history&&(e.back.history=!0),e},l._initWebviewOptions=function(e,t){"undefined"==typeof t?t=~e.indexOf(a.W2A_WEBVIEW_ID)?{id:e}:{id:a.W2A_WEBVIEW_ID+Math.random(),url:e}:n.isObject(t)||(t={id:e,matchPathnames:t}),t=n.extend(this.globalWebviewOptions,t);var i=n.isObject(t)&&n.isObject(t.back)&&"undefined"!=typeof t.back.history,o=n.isObject(t)&&n.isObject(t.screenshot)&&t.screenshot.title,r=n.isObject(t)&&n.isObject(t.screenshot)&&t.screenshot.view;if(t=n.extend(p,this.globalWebviewOptions,t),this._convertOldVersion(t),"string"==typeof t.back&&(t.back=n.extend(p.back,{selector:t.back})),"string"==typeof t.screenshot&&(t.screenshot=n.extend(p.screenshot,{url:t.screenshot})),t.screenshot.title&&("boolean"==typeof t.screenshot.title&&(t.screenshot.title=n.extend(p.screenshot.title,{enable:!0})),o&&n.isObject(t.screenshot.title)&&(t.screenshot.title.enable=!0)),r){var s=t.screenshot.view;if("number"==typeof s){var c=s+"px";t.screenshot.view=n.extend(p.screenshot.view,{enable:!0,styles:{height:c},crop:{src:{height:c},dst:{height:c}}})}else if(n.isObject(s))if(s.height){var c=s.height+"px",l=s.dock;t.screenshot.view=n.extend(p.screenshot.view,{enable:!0,interceptTouchEvent:!!s.interceptTouchEvent,styles:{height:c,position:l?"dock":"absolute"},crop:{src:{height:c},dst:{height:c}},click:s.click||{}})}else t.screenshot.view.enable=!0}else t.screenshot.view=!1;t.screenshot.drawText&&n.isObject(t.screenshot.drawText)&&(t.screenshot.drawText=[t.screenshot.drawText]),"boolean"==typeof t.gps&&(t.gps=n.extend(p.gps,{enable:t.gps})),!i&&"webview"===t.mode&&n.isArray(t.matchPathnames)&&(t.back.history=!1);var h=t.group,d=!1;if(h&&n.isArray(h.matchPathnames)&&h.matchPathnames.length){var u=h.matchPathnames;t.group.matchPathnames=u,h.drawText&&n.isObject(h.drawText)&&(t.group.drawText=[h.drawText]),t.styles.render="always",d=!0}d||(t.group=!1);var w={__wap2app_type:t.quit?"home":"normal"};return t.extras=n.extend(t.extras,w),t},l._convertOldVersion=function(e){return e.matchHostnames=e.matchHostnames||e.hostname,e.matchPathnames=e.matchPathnames||e.pathname,delete e.hostname,delete e.pathname,e.group&&e.group.pathname&&(e.group.matchPathnames=e.group.pathname,delete e.group.pathname),e},l._matchOptionsByUrl=function(e){for(var t in this.webviewsOptions){var i=this.webviewsOptions[t];if(n.isMatch(e,i))return i}return!1},l.getWebviewOptionsById=function(e){return this.webviewsOptions[e]||this._initWebviewOptions(e)},l.getRedirectWebviewOptionsByUrl=function(e){var t=o.getLocation(e);for(var i in this.redirectWebviewOptions){var a=this.redirectWebviewOptions[i];if(n.isMatch(t,a))return a}return!1},l.getWebviewOptionsByUrl=function(e){var t=!1,i=o.getLocation(e);if(t=this._matchOptionsByUrl(i))return t;var r=this.globalOptions.browser.webview;return(r.matchHostnames||r.matchPathnames)&&n.isMatch(i,r)?this._getWebviewOptionsById(a.W2A_BROWSER_CHILD_ID):this._initWebviewOptions(e)},l.isConfiged=function(e){var t=this._matchOptionsByUrl(o.getLocation(e));return t&&t.id!==a.W2A_BROWSER_CHILD_ID?t.id:!1},e.exports=c},function(e,t){e.exports={globalOptions:{debug:!1,ignore:!1,lockOrientation:"portrait-primary",globalOptions:{},webviews:{},cookies:!1,sms:{match:{sign:!1,length:6},callback:{webviewId:!1,handle:!1}},feedback:{url:"http://stream.dcloud.net.cn/wap2app/feedback",params:{app_name:"",app_vendor:"",about:"",ci:"",di:""}},browser:{url:!1,webview:{mode:"history",matchHostnames:!1,matchPathnames:!1,reload:!0,pullToRefresh:!1},dock:!1,styles:{".header":{height:"44px","background-color":"#efefef"},".back,.close":{color:"#8e8e93"},".title":{color:"#252525"},".progressbar":{"background-color":"#b6b6b6"},".progressbar span":{"background-color":"#ed2e2b"}}},pullToRefresh:{webview:{matchHostnames:!1,matchPathnames:!1}}},webviewOptions:{mode:"webview",url:"",quit:!1,matchHostnames:!1,matchPathnames:!1,preload:!1,blockNetworkImage:!1,fastclick:{className:"needsclick"},events:{titleUpdate:!0,loading:!0,loaded:!0},group:{matchPathnames:!1,placeholder:"#fff",report:{ignore:!1},activate:{container:!1,attribute:!1,itemMatch:!1,itemActiveClass:!1,activate:!1,deactivate:!1},drawText:{text:"",dst:{top:0,left:0,width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,frames:12,region:{top:0,bottom:0,left:0,right:0}}},styles:{popGesture:"close",hardwareAccelerated:!0,errorPage:"_www/__wap2apperror.html"},fixed:{selector:"",styles:!1},extras:!1,network:!0,ignore:!1,previewImage:{url:!1,selector:!1,options:!1},listenResourceLoading:{match:!1},overrideUrlLoading:{block:!1,delay:500,handle:!1,ignore:!1,replace:!1,redirect:{handle:!1,match:!1,defaultUrl:!1,paramName:!1,reload:!1},temporary:!1},overrideResourceRequest:!1,appendJsFile:!1,delay:0,show:{eventType:"titleUpdate",aniShow:"slide-in-right",duration:300},history:!1,showWaiting:!0,screenshot:{url:!1,handle:!1,title:{enable:!1,filter:!1,max:25,dst:{top:"0px",left:"0px",width:"100%",height:"44px"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},drawText:{text:"",max:25,dst:{top:"0px",left:"0px",width:"100%",height:"100%"},styles:{size:"16px",color:"#000000",weight:"normal",style:"normal",family:""}},animation:{type:"shrink",duration:200,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"},clear:{eventType:"loaded",delay:0}},view:{enable:!1,height:0,dock:!1,interceptTouchEvent:!1,styles:{top:"0px",left:"0px",width:"100%",height:"100%",dock:"top",position:"absolute"},crop:{src:{top:"0px",left:"0px",width:"100%",height:"100%"},dst:{top:"0px",left:"0px",width:"100%",height:"100%"}},click:{back:{rect:{top:0,left:0,width:60,height:60},handle:function(){wap2app.back()}}}}},back:{delay:500,showWaiting:!1,handle:!1,enable:!0,backbutton:!0,override:!0,history:!0,selector:"",eventType:"click",beforeBack:!1,reload:!1,animation:{type:"shrink",duration:200,frames:12,region:{top:"0px",bottom:"0px",left:"0px",right:"0px"}}},loading:!1,loaded:!1,reload:!1,pullToRefresh:{support:!0,height:"100px",range:"300px",contentdown:{caption:"\u4e0b\u62c9\u53ef\u4ee5\u5237\u65b0"},contentover:{caption:"\u91ca\u653e\u7acb\u5373\u5237\u65b0"},contentrefresh:{caption:"\u6b63\u5728\u5237\u65b0..."}},injectStyle:!1,injectScript:!1,gps:{enable:!1,interval:1440,disabledMsg:"\u672c\u673a\u672a\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd\uff0c\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\u5f00\u542f\u5b9a\u4f4d\u529f\u80fd",forbiddenMsg:"\u5c1a\u672a\u8d4b\u4e88\u83b7\u53d6\u4f4d\u7f6e\u7684\u6743\u9650\u3002\u70b9\u786e\u5b9a\u8fdb\u5165\u8bbe\u7f6e\uff0c\u7ed9{app}\u8d4b\u4e88\u5b9a\u4f4d\u6743\u9650"},share:!1,report:{dom:!1}}}},function(e,t,i){var n=i(8),o=i(18),a=function(e){this._init(e)},r=a.prototype;r._init=function(e){this.w2aOptions=e,this.webview=plus.webview.currentWebview(),plus.screen.lockOrientation(e.globalOptions.lockOrientation||"portrait-primary"),this.webview.setStyle(e.homeWebviewOptions.styles),this._initCookies(this.w2aOptions.globalOptions.cookies)},r._initCookies=function(e){if(e){e=n.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var i=e[t];i.url&&i.name&&o.set(i.url,i.name,i.value,i.expire)}}},r.handleOldVersion=function(){this.webview.appendJsFile("_www/__wap2app.js"),this.webview.appendJsFile("_www/__wap2appconfig.js");var e=this.w2aOptions.homeWebviewOptions.appendJsFile;if("string"==typeof e&&e&&(e=[e]),n.isArray(e))for(var t=0,i=e.length;i>t;t++)e[t]&&this.webview.appendJsFile("_www/"+e[t]);window.location.replace(this.w2aOptions.homeWebviewOptions.url)},e.exports=a},function(e,t,i){var n=i(8),o=i(15);n.plusReady(function(){var e=plus.runtime.innerVersion.split(".");if(e[e.length-1]>=25462&&"Xiaomi"===plus.device.vendor&&"default"===plus.runtime.launcher){var t={"default":1,barcode:2,scheme:3,push:4,shortcut:5,stream:6},i={unknown:-1,denied:0,authorized:1,undetermined:2,notdeny:3,unsupported:4},n=plus.navigator.checkPermission("SHORTCUT"),a=t[plus.runtime.launcher];a||(a="");var r=i[n];r||(r="");var s={appid:plus.runtime.appid,imei:plus.device.imei,p:"Android"===plus.os.name?"a":"i",ov:plus.os.version,md:plus.device.model,net:plus.networkinfo.getCurrentType(),vb:plus.runtime.innerVersion,vd:plus.device.vendor,lpn:"",av:plus.runtime.version,sf:a,op:r};o.post("https://stream.dcloud.net.cn/collect/shortcut/result",s,function(e){})}})}]);